(function(){this.app=angular.module("app",["ng-rails-csrf","ngStorage"])}).call(this),$(document).ready(function(){$(".fa-temp").each(function(){for(var e=$(this).attr("class").split(/\s+/),t=0;t<e.length;t++){var r=e[t];if("fa-temp"!=r&&0==r.indexOf("fa-")){var n=r.substr(0,r.length-"-temp".length);$(this).addClass(n)}}})}),function(){window.ListenerList=function(){function e(){this.listeners=[]}return e.listeners=[],e.prototype.add_listener=function(e){return this.listeners.push(e)},e.prototype.notify=function(e){var t,r,n,o,s;for(o=this.listeners,s=[],t=0,r=o.length;r>t;t++)n=o[t],s.push(n(e));return s},e}()}.call(this),function(){app.factory("Api",["$http","$timeout","ApiFeedback",function(e,t,r){var n;return n={},n.post=function(t,r){return n.perform_request(e.post,t,r)},n.put=function(t,r){return n.perform_request(e.put,t,r)},n.get=function(t,r){return n.perform_request(e.get,t,r)},n["delete"]=function(t,r){return n.perform_request(e["delete"],t,r)},n.process_request=function(e,t,r,n,o,s,c){return null==r&&(r={}),e(t,r).success(function(e){return n.before_success&&n.before_success(e),o&&o(e),n.after_success&&n.after_success(e),c&&c(e),n.after_response?n.after_response(e):void 0}).error(function(e){return s&&s(e),c&&c(e),n.after_response?n.after_response(e):void 0})},n.perform_request=function(e,o,s){var c,i,a,u,l,f,_,p,d,m;return r.clear_errors(),null==s&&(s={}),i=s.data||{},c=null,s.button&&"function"==typeof s.button.button&&(c=s.button),d=s.success_message,m=s.success_message_delay||2e3,p=s.success,u=s.error,f=s.on_response,l=s.error_key_replacements,a=s.disable_button,_=s.render_modal_errors,null!==c&&c.button("loading"),n.process_request(e,o,i,s,function(e){return p&&p(e),d?r.show_success_message(d,m):void 0},function(e){return u&&u(e),r.render_errors(e,l,_)},function(e){return f&&f(e),null!==c&&(c.button("reset"),a)?t(function(){return c.attr("disabled","disabled")}):void 0})},n}])}.call(this),function(){app.factory("ApiFeedback",["$timeout",function(e){var t,r;return t={success_messages:[]},t.clear_errors=function(){return t.error_message="",t.errors=[],t.modal_error_message="",t.modal_errors=[]},t.show_success_message=function(r,n){return null==r&&(r="Success!"),null==n&&(n=2e3),t.success_messages.push(r),e(function(){return t.success_messages.splice(0,1)},n)},r=function(e,t){var r,n,o,s,c,i,a;if(!is_empty(e)){c=[];for(o in e)for(n=e[o],i=0,a=n.length;a>i;i++)r=n[i],is_empty(t)||is_empty(t[o])||(o=t[o]),s=o.humanize()+" "+r,r.starts_with("You ")&&(s=r),c.push(s);return c}},t.render_errors=function(n,o,s){return null==n&&(n={}),s?(t.modal_error_message=n.message,t.modal_errors=r(n.errors,o),void e(function(){return $(".modal.in").first().scrollTop(0)})):(t.error_message=n.message,t.errors=r(n.errors,o),e(function(){return scroll_to_element($(".alert-danger").first())}))},t}])}.call(this),function(){app.factory("Browser",[function(){var e;return e={},e.init_key=function(e){return is_empty(localStorage.getItem(e))||isNaN(localStorage.getItem(e))?localStorage.setItem(e,0):void 0},e.on=function(t,r){return e.init_key(t),$(window).bind("storage",function(e){return e.originalEvent.key===t?r():void 0})},e.notify=function(t){var r;return e.init_key(t),r=parseInt(localStorage.getItem(t)),localStorage.setItem(t,r+1)},e}])}.call(this),function(){app.factory("EventSystem",["Api",function(e){var t;return t={user_socket:null,message_created_listeners:new ListenerList,contacts_loaded_listeners:new ListenerList},t.init=function(){var e;return e=window.location.hostname,t.user_socket=io.connect(e+":5002"),console.log(e),t.user_socket.on("message-created",function(e){return console.log(e),t.message_created_listeners.notify(e)}),t.user_socket.on("contacts-loaded",function(e){return console.log(e),t.contacts_loaded_listeners.notify(e)})},t}])}.call(this),function(){app.controller("application_controller",["$scope","$localStorage","$sessionStorage",function(e,t,r){return e.app_user=gon.app_user,e.localStorage=t,e.sessionStorage=r}])}.call(this),function(){app.controller("clients_manage_controller",["$scope",function(e){}])}.call(this),function(){app.controller("contacts_manage_controller",["$scope",function(e){}])}.call(this),function(){app.controller("header_controller",["$scope",function(e){}])}.call(this),function(){app.controller("home_demo_controller",["$scope","EventSystem",function(e,t){return e.messages=[],e.contacts=[],t.message_created_listeners.add_listener(function(t){return e.$apply(e.messages.push(t.data))}),t.contacts_loaded_listeners.add_listener(function(t){return e.$apply(e.contacts.push(t.data))}),t.init()}])}.call(this),function(){app.controller("home_index_controller",["$scope",function(e){}])}.call(this),function(){app.controller("users_after_login_controller",["$scope",function(e){var t;return t=gon.after_initialization_url||"/",t.indexOf("users/after_login")>0&&(t="/"),window.location=t}])}.call(this),function(){app.controller("users_manage_controller",["$scope",function(e){}])}.call(this);